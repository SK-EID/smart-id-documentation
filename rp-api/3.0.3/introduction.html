<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Introduction :: Smart-ID documentation</title>
    <link rel="canonical" href="https://sk-eid.github.io/smart-id-documentation/rp-api/introduction.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../_/css/site.css">

<link rel="icon" href="../../_/img/favicon.svg" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://sk-eid.github.io/smart-id-documentation">
        <img src="../../_/img/sk-id-solutions.svg" class="logo" />
      </a>
      <span class="separator"></span>
      <span class="title">Smart-ID documentation</span>
    </div>

    <div class="navbar-right">
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="nav-toggle"></button>    </div>

  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rp-api" data-version="3.0.3">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="introduction.html">RP API documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="introduction.html">Introduction</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="glossary.html">Terms and glossary</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes.html">Changes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="sessions.html">Session types</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="authentication_session.html"><code>authentication</code> session</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="signature_session.html"><code>signature</code> session</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="certificatechoice_session.html"><code>certificatechoice</code> session</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="session_status.html"><code>session</code> status</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="dynamic_link_flows.html">Dynamic link flows</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="notification_based_flows.html">Notification based flows</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="response_verification.html">Response verification</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="object_references.html">REST object references</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="signature_protocols.html">Signature protocols</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="interactions.html">Interactions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="request_properties.html">Additional request properties</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="api_details.html">REST API details</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="secure.html">Secure Implementation Guide</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Relying Party API</span>
    <span class="version">3.0.3</span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../../index.html">Documentation</a></div>
    </li>
    <li class="component is-current">
      <div class="title"><a href="../introduction.html">Relying Party API</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../introduction.html">3.1.5</a>
        </li>
        <li class="version">
          <a href="../3.1.4/introduction.html">3.1.4</a>
        </li>
        <li class="version">
          <a href="../3.1.3/introduction.html">3.1.3</a>
        </li>
        <li class="version is-current">
          <a href="introduction.html">3.0.3</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Introduction</h1>
<div id="preamble">
<div class="sectionbody">
<!-- Version 45adefdaa52b9ff74db341d632d339ec47473cbc -->
<div class="paragraph">
<p>This document describes the relying party service interface protocol of Smart-ID server and provides information for integration. The interface offers the entry point to Smart-ID main use cases, i.e. authentication and signing.</p>
</div>
<div class="paragraph">
<p>The main Smart-ID use case is of a relying party to start a session by calling the Smart-ID server RP API with a challenge when the user wishes to authenticate with the relying party&#8217;s service or create a signature.</p>
</div>
<div class="paragraph">
<p>Either the user must scan a QR code for multi-device use case to launch the Smart-ID application or click a link for single-device use case to launch the Smart-ID application, or the Smart-ID server must send a push message notification to the user&#8217;s device where the user opens the Smart-ID application.</p>
</div>
<div class="paragraph">
<p>The user checks the details of the transaction and enters a PIN code to confirm it.</p>
</div>
<div class="paragraph">
<p>The application communicates with the Smart-ID server and once the final signature is created makes it available for the relying party to be fetched.</p>
</div>
<div class="paragraph">
<p>Meanwhile, the relying party has been waiting for a reply from the Smart-ID server using a long poll connection. In case of success it receives the signature and the user&#8217;s certificate to be able to validate the result.</p>
</div>
<div class="paragraph">
<p>The service creates digital signatures as proof of authentication and signing. However, to create electronic signatures the relying party must create the required document structure, calculate the hash and have that signed using this API.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The latest version of the API introduces new flows collectively referred to as <em>"dynamic flows"</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>for multi-device use cases&#8201;&#8212;&#8201;dynamic QR codes that the user must scan;</p>
</li>
<li>
<p>for single-device use cases where the user is visiting an RP webpage using a mobile browser&#8201;&#8212;&#8201;dynamic links which the user must click;</p>
</li>
<li>
<p>for single-device use cases where the user is using an RP app&#8201;&#8212;&#8201;dynamic links which the user must click.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The guiding principle in designing the API has been to unify those three aforementioned flows as much as possible to minimize the integration efforts for the RPs. Because of this, they share the same security mechanisms and principles, even though the medium of transmitting information is completely different.</p>
</div>
<div class="paragraph">
<p>This also means that it is possible for an RP to offer alternative methods of authentication at the same time without doing multiple requests to RP-API.</p>
</div>
<div class="paragraph">
<p>In RP API version 3, the notification based flows will still be available, but for maximum security, it is recommended that they are used only if the user has been authenticated at least once before in that device by one of the more secure dynamic flows. The recommended way for ensuring this is for the RP to utilize the client&#8217;s local storage (e.g. browser cookies) to keep track which clients have previously authenticated using the more secure flows.</p>
</div>
<div class="paragraph">
<p>For both usability and security reasons, in the single-device use case the new dynamic links based flows should always be used.</p>
</div>
<div class="paragraph">
<p>Brokers of the Smart-ID service are treated similarly to relying parties and there is no extra configuration compared to previous RP API versions.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dynamic_link_based_authentication_flow"><a class="anchor" href="#_dynamic_link_based_authentication_flow"></a>Dynamic link based authentication flow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following sequence diagram gives an overview of the new (more secure) dynamic link based authentication flow.</p>
</div>
<div class="imageblock sequence kroki-format-svg kroki">
<div class="content">
<a class="image" href="_images/flow-ac1a9766b64d324a16757668fd43fd567053b8ed.svg"><img src="_images/flow-ac1a9766b64d324a16757668fd43fd567053b8ed.svg" alt="flow"></a>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notification_based_authentication_flow"><a class="anchor" href="#_notification_based_authentication_flow"></a>Notification based authentication flow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following sequence diagram gives an overview of the notification based authentication flow.</p>
</div>
<div class="imageblock sequence kroki-format-svg kroki">
<div class="content">
<a class="image" href="_images/flow-48d17b33d37ee99f0ed104ace46784cc0ff6e3e3.svg"><img src="_images/flow-48d17b33d37ee99f0ed104ace46784cc0ff6e3e3.svg" alt="flow"></a>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notification_based_signing_flow"><a class="anchor" href="#_notification_based_signing_flow"></a>Notification based signing flow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following sequence diagram illustrates the notification based signing flow.</p>
</div>
<div class="imageblock sequence kroki-format-svg kroki">
<div class="content">
<a class="image" href="_images/flow-743c73634d16aa32a8e4fec6a077bf8cdf0f1856.svg"><img src="_images/flow-743c73634d16aa32a8e4fec6a077bf8cdf0f1856.svg" alt="flow"></a>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Â© 2024 SK ID Solutions AS</p>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/tabs.js" data-sync-storage-key="language"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
