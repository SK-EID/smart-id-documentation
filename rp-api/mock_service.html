<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mock Service :: Smart-ID documentation</title>
    <link rel="canonical" href="https://sk-eid.github.io/smart-id-documentation/rp-api/mock_service.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../_/css/site.css">

<link rel="icon" href="../_/img/favicon.svg" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://sk-eid.github.io/smart-id-documentation">
        <img src="../_/img/sk-id-solutions.svg" class="logo" />
      </a>
      <span class="separator"></span>
      <span class="title">Smart-ID documentation</span>
    </div>

    <div class="navbar-right">
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="nav-toggle"></button>    </div>

  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rp-api" data-version="3.1.7">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="introduction.html">Relying Party API</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-text">Smart-ID Documentation</span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Getting started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../demo.html">Try out</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../implementation.html">Smart-ID integration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../environments.html">Environments</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../device_link.html">Device link fallback page</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../https_pinning.html">HTTPS pinning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../client_libraries.html">Client libraries</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../suggestions.html">Suggestions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../logos.html">Logos</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../faq.html">FAQ</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../app_release_notes.html">App Release Notes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../contact.html">Contact</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text">Automated testing</span>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="mock_service.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="device_link_test_endpoint.html">Device link test endpoint</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../test_accounts.html">Test accounts</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text">Relying Party API</span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="introduction.html">Introduction</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes.html">Changes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="glossary.html">Glossary</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="overview_of_api_endpoints.html">Overview of API endpoints</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="api_specification.html">OpenAPI specification</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="device_link_flows.html">Device link flows</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="authcode.html"><code>authCode</code> calculation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="notification_based_flows.html">Notification based flows</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="api_details.html">API technical description</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="interactions.html">Interactions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="signature_protocols.html">Signature protocols</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="callback_urls.html">Callback URLs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="response_verification.html">Response verification</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="additional_security_measures.html">Additional security measures</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Relying Party API</span>
    <span class="version">3.1.7</span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../index.html">Documentation</a></div>
    </li>
    <li class="component is-current">
      <div class="title"><a href="introduction.html">Relying Party API</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="introduction.html">3.1.7</a>
        </li>
        <li class="version">
          <a href="3.1.6/introduction.html">3.1.6</a>
        </li>
        <li class="version">
          <a href="3.1.5/introduction.html">3.1.5</a>
        </li>
        <li class="version">
          <a href="3.1.4/introduction.html">3.1.4</a>
        </li>
        <li class="version">
          <a href="3.1.3/introduction.html">3.1.3</a>
        </li>
        <li class="version">
          <a href="3.0.3/introduction.html">3.0.3</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Mock Service</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The Mock Service, also known as the Smart-ID <a href="introduction.html" class="xref page">Relying Party API version 3</a> automated testing interface, is a component of the Smart-ID Demo environment. It simulates the behavior of a mobile device running the Smart-ID application, allowing RPs to test their Smart-ID integrations without the need for an actual phone or real user interaction. Instead of waiting for a user to interact with their device, the Mock Service automatically produces predefined outcomes such as a successful transaction, a cancelled transaction, or a timeout.
When the RP sends a request to the Smart-ID Demo environment, the Mock Service steps in to act as the “user” and completes the request with the result that corresponds to the document number provided in the request. All the steps that the RP does, such as creating the request, polling the results, and validating the returned signature, are exactly the same as they would be with actual mobile devices. From the RP&#8217;s point of view, the flow behaves as though a real end-user had taken part in the transaction.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_use"><a class="anchor" href="#_how_to_use"></a>How to use</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Mock Service can be used in two main ways: through the notification flow and through the device link–based flow. In both cases, the RP follows the same sequence of actions as in Live environment, with the only difference being that the user&#8217;s mobile device is replaced by the Mock Service. The notification flow is the most straightforward, where the Smart-ID Core communicates directly with the mobile app. With device link–based flows introduced in RP API v3, the user is expected to interact with a device link that opens the Smart-ID app. Device links can appear in different forms: a QR code scanned by the user, a Web2App link clicked in a browser on the same device, or an App2App link opened from another mobile application. The Mock Service provides simulation for all of these cases, ensuring that RPs can test every supported scenario in the Demo environment.</p>
</div>
<div class="paragraph">
<p>Each document number corresponds to a specific result type. For instance, one document number may consistently provide a successful authentication, while another may always produce an error or a timeout. When a RP submits a request to the RP API using one of these document numbers, the Service retrieves the number, identifies the associated outcome, and responds accordingly.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notification_flow"><a class="anchor" href="#_notification_flow"></a>Notification flow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the <a href="notification_based_flows.html" class="xref page">Notification based flow</a>, the Mock Service operates exactly like an actual mobile device. RP initiates a request, indicating one of the preconfigured document numbers, and the Service delivers the corresponding mapped result. Then, the RP polls for the transaction outcome and proceeds with validation as if the process had been executed on a real device.</p>
</div>
<div class="paragraph">
<p>The following diagram describes the simplified version of the notification based flow for the <code>signature</code> session in Live environment (<code>authentication</code> session is omitted to avoid duplication). The full version of the diagram can be found at the <a href="notification_based_flows.html" class="xref page">Notification based flow</a> page.</p>
</div>
<div class="imageblock sequence kroki-format-svg kroki">
<div class="content">
<a class="image" href="_images/flow-4db79d7c91e330b6a3018244961d5d61cb9c0f80.svg"><img src="_images/flow-4db79d7c91e330b6a3018244961d5d61cb9c0f80.svg" alt="flow"></a>
</div>
</div>
<div class="paragraph">
<p>The following diagram describes the notification based flow for the <code>signature</code> session via Mock Service.</p>
</div>
<div class="imageblock sequence kroki-format-svg kroki">
<div class="content">
<a class="image" href="_images/flow-dc495191400b2d455f823e3a943e6b963d0a925d.svg"><img src="_images/flow-dc495191400b2d455f823e3a943e6b963d0a925d.svg" alt="flow"></a>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_device_link_flow"><a class="anchor" href="#_device_link_flow"></a>Device link flow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="device_link_flows.html" class="xref page">Device link flow</a> requires one additional step compared to the notification flow. Unlike the notification flow, where Core communicates directly with the mobile application, the device link flow requires the RP to generate and handle a special type of URL known as a device link. This link is then delivered to the user, who normally interacts with it on their device, which in turn opens the Smart-ID app.
To achieve this flow in the Demo environment, the Mock Service requires the RP to simulate the user interaction.</p>
</div>
<div class="paragraph">
<p>When the RP creates a device link request, it first receives three values from the RP API: <code>sessionId</code>, <code>sessionToken</code>, and <code>sessionSecret</code>. In the Live environment, these would be bound to the device link opened by the user. In the Demo environment, RP must send these values to the Mock Service through the <a href="device_link_test_endpoint.html#tag/device-link/POST/device-link" class="xref page">device-link endpoint</a>. This step simulates the user clicking or scanning the device link and guarantees that the Service can continue with the simulation of the outcome. After this link has been “used”, the Mock Service finalizes the transaction and generates the mapped result.</p>
</div>
<div class="sect2">
<h3 id="_same_device_flows_web2app_and_app2app"><a class="anchor" href="#_same_device_flows_web2app_and_app2app"></a>Same-Device Flows (Web2App and App2App)</h3>
<div class="paragraph">
<p>In the Web2App and App2App flows, there is an additional step that occurs after the user has entered their PIN in Smart-ID app - the user is automatically re-directed to RP&#8217;s website or app.
To replicate this in the Demo environment, the Mock Service processes the signing or authentication request and performs a GET request to the <a href="callback_urls.html" class="xref page">Callback URL</a> supplied by the RP. It includes the appropriate cookies and additional parameters, such as the <code>userChallengeVerifier</code> and <code>sessionSecretDigest</code>, which the RP would normally receive via the callback URL from the real application.</p>
</div>
<div class="paragraph">
<p>The following diagram describes the the simplified version of the device link based flow for the <code>authentication</code> session in Live environment. The full version of the diagram can be found at the <a href="device_link_flows.html" class="xref page">Device link flow</a> page.</p>
</div>
<div class="imageblock sequence kroki-format-svg kroki">
<div class="content">
<a class="image" href="_images/flow-6d37c8d01fce6b767632eddefd8a888ac137e6e5.svg"><img src="_images/flow-6d37c8d01fce6b767632eddefd8a888ac137e6e5.svg" alt="flow"></a>
</div>
</div>
<div class="paragraph">
<p>The following diagram describes the device link based flow for the <code>authentication</code> session via Mock Service.</p>
</div>
<div class="imageblock sequence kroki-format-svg kroki">
<div class="content">
<a class="image" href="_images/flow-d73b4df9480fa06a145d6f7d1014fe2adf375107.svg"><img src="_images/flow-d73b4df9480fa06a145d6f7d1014fe2adf375107.svg" alt="flow"></a>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>© 2024 SK ID Solutions AS</p>
</footer>
<script id="site-script" src="../_/js/site.js" data-ui-root-path="../_"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<script async src="../_/js/vendor/tabs.js" data-sync-storage-key="language"></script>
<script src="../_/js/vendor/lunr.js"></script>
<script src="../_/js/search-ui.js" id="search-ui-script" data-site-root-path=".." data-snippet-length="100" data-stylesheet="../_/css/search.css"></script>
<script async src="../search-index.js"></script>
  </body>
</html>
