<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Interactions :: RP API integration guidance</title>
    <link rel="canonical" href="https://sk-eid.github.io/smart-id-documentation/rp-api/3.1_DRAFT/interactions.html">
    <meta name="generator" content="Antora 3.1.7">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/vendor/tabs.css">
  </head>
  <body class="article -toc">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item logo" href="https://www.skidsolutions.eu/"><svg viewBox="0 0 250 59.99"><defs><style>.sk-logo{fill:#fff;}</style></defs><g><g><path class="sk-logo" d="M30,0A30,30,0,1,0,60,30,30,30,0,0,0,30,0m0,56.56A26.57,26.57,0,1,1,56.56,30,26.56,26.56,0,0,1,30,56.56m-5.89-29a5.89,5.89,0,0,1,4.68,5.93,8.52,8.52,0,0,1-.17,1.63c-.84,3.68-4.1,5.32-7.44,5.32a13.51,13.51,0,0,1-1.5-.09c-2.32-.3-6.76-2.49-6.76-5.48a2.75,2.75,0,0,1,.27-1.17,1.87,1.87,0,0,1,1.71-1.1c1.21,0,1.93,1.13,2.6,2a3.14,3.14,0,0,0,1,.78,4.65,4.65,0,0,0,2,.69l.56,0h.35c1.41,0,3.14-.72,3.14-2.48a1.6,1.6,0,0,0-.72-1.47,2.82,2.82,0,0,0-.92-.38l-.79-.22-2.69-.65-.75-.19c-3.1-.89-5.09-2.73-5.09-5.69a6.92,6.92,0,0,1,.3-2,5.91,5.91,0,0,1,2.48-3.32,8,8,0,0,1,4.48-1.25h.55a6.44,6.44,0,0,1,1,.11,7.15,7.15,0,0,1,2.21.62,8.24,8.24,0,0,1,1.79,1c1.14.92,2.34,2.13,1.39,3.77a2,2,0,0,1-1.37,1,2.08,2.08,0,0,1-1.52-.32l-.72-.6-.43-.32a4.39,4.39,0,0,0-3-1c-1,0-2.4.3-2.75,1.45a2,2,0,0,0-.1.56c0,.48.29,1.15,2.05,1.68l.55.16.38.1.84.21,1.17.3.5.07.81.22M46.68,37a2.42,2.42,0,0,1,.4,1.29,2.17,2.17,0,0,1-1.46,2.1,3.51,3.51,0,0,1-.65.09,2.35,2.35,0,0,1-1.72-.8l-6.71-7.15v5.31c0,1.22-.45,2.7-2,2.7a2.18,2.18,0,0,1-2.13-2.36v-17c0-1.27.49-2.73,2.09-2.73a1.94,1.94,0,0,1,2.09,1.83V26l6.13-6.48a2.93,2.93,0,0,1,1.43-.89,2.07,2.07,0,0,1,2.32,1.62,2.57,2.57,0,0,1-.84,2.45l-6.36,6.51,7,7.22Zm25.49,2.71c0,.45-.12.64-.57.64H69.65c-.41,0-.57-.19-.57-.64V19.34c0-.44.16-.63.57-.63H71.6c.45,0,.57.19.57.63Zm5.74.64c-.38,0-.51-.22-.51-.64V19.34c0-.44.16-.63.58-.63h6.66c5.46,0,7.27,2.29,7.27,4.91V35.48c0,2.61-1.81,4.91-7.27,4.91Zm2.59-19V37.74h4.14c2.87,0,4.15-1.05,4.15-2.77V24.13c0-1.73-1.28-2.78-4.15-2.78Zm34.92,1.79c0-1.91-1-3.25-4.75-3.25s-4.76,1.34-4.76,3.25v1.18a2.84,2.84,0,0,0,2,2.71l6.13,2.33c1.59.6,3.19,1.81,3.19,4v2.81c0,2.49-1.53,4.5-6.61,4.5s-6.63-2-6.63-4.5V34.49c0-.29.13-.41.38-.41h.93c.25,0,.38.12.38.41V36c0,1.91,1.18,3.25,4.91,3.25s5-1.34,5-3.25V33.69c0-1.72-1.41-2.48-2.65-3L107,28.43a4.07,4.07,0,0,1-2.74-3.76V23c0-2.49,1.4-4.5,6.41-4.5s6.41,2,6.41,4.5v1.56c0,.25-.1.38-.39.38h-.92c-.26,0-.35-.13-.35-.38Zm6.82-.19c0-2.49,1.53-4.5,6.64-4.5s6.69,2,6.69,4.5v13.2c0,2.49-1.56,4.5-6.69,4.5s-6.64-2-6.64-4.5Zm11.61.25c0-1.94-1.24-3.28-5-3.28s-4.95,1.34-4.95,3.28V35.89c0,2,1.25,3.29,4.95,3.29s5-1.34,5-3.29ZM143,38.92h9.44c.26,0,.39.1.39.39V40c0,.29-.13.38-.39.38H141.63c-.19,0-.32-.13-.32-.38V19.09a.34.34,0,0,1,.39-.39h1c.26,0,.35.13.35.39Zm15.57-3c0,2,1.24,3.29,5,3.29s5-1.34,5-3.29V19.09a.33.33,0,0,1,.38-.38h1c.25,0,.35.12.35.38V36.15c0,2.49-1.53,4.5-6.67,4.5s-6.66-2-6.66-4.5V19.09a.33.33,0,0,1,.38-.38h1c.25,0,.35.12.35.38Zm28.8-17.18c.25,0,.38.09.38.38v.7c0,.29-.13.38-.38.38h-5.81V40c0,.25-.09.38-.35.38h-1c-.28,0-.38-.13-.38-.38V20.17H174.1c-.29,0-.38-.09-.38-.38v-.7c0-.29.09-.38.38-.38ZM193.14,40c0,.25-.1.38-.35.38h-1a.34.34,0,0,1-.38-.38V19.09a.33.33,0,0,1,.38-.38h1c.25,0,.35.12.35.38ZM198.91,23c0-2.49,1.53-4.5,6.63-4.5s6.7,2,6.7,4.5v13.2c0,2.49-1.56,4.5-6.7,4.5s-6.63-2-6.63-4.5Zm11.61.25c0-1.94-1.25-3.28-5-3.28s-4.94,1.34-4.94,3.28V35.89c0,2,1.24,3.29,4.94,3.29s5-1.34,5-3.29ZM231.28,40c0,.25-.1.38-.35.38h-.86a.33.33,0,0,1-.35-.19L220.6,24a17.53,17.53,0,0,1-1-1.92V40c0,.25-.1.38-.35.38h-.87A.34.34,0,0,1,218,40V19.09a.33.33,0,0,1,.38-.38h.87a.35.35,0,0,1,.31.15l9.22,16.36c.29.52.93,1.82.93,1.82V19.09a.33.33,0,0,1,.38-.38h.86c.25,0,.35.12.35.38Zm16.9-16.87c0-1.91-1.05-3.25-4.75-3.25s-4.75,1.34-4.75,3.25v1.18a2.84,2.84,0,0,0,2,2.71l6.12,2.33c1.6.6,3.19,1.81,3.19,4v2.81c0,2.49-1.53,4.5-6.6,4.5s-6.63-2-6.63-4.5V34.49c0-.29.12-.41.38-.41h.92c.26,0,.39.12.39.41V36c0,1.91,1.18,3.25,4.91,3.25s5-1.34,5-3.25V33.69c0-1.72-1.4-2.48-2.64-3l-5.94-2.3A4.09,4.09,0,0,1,237,24.67V23c0-2.49,1.4-4.5,6.41-4.5s6.41,2,6.41,4.5v1.56c0,.25-.09.38-.38.38h-.93c-.25,0-.35-.13-.35-.38Z"></path></g></g></svg></a>
      <a class="navbar-item" href="https://sk-eid.github.io/smart-id-documentation">RP API integration guidance</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="rp-api" data-version="3.1_DRAFT">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="introduction.html">Relying Party API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="getting_started.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="glossary.html">Glossary</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="device_link_flows.html">Device link flows</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="authcode.html"><code>authCode</code> calculation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="notification_based_flows.html">Notification based flows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="api_specification.html">OpenAPI specification</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="api_details.html">API technical description</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="interactions.html">Interactions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="signature_protocols.html">Signature protocols</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="response_verification.html">Response verification</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="callback_url_verification.html">Callback URL verification</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes.html">Changes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="secure.html">Secure Implementation Guide</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">RP API Documentation</span>
    <span class="version">3.1_DRAFT</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="introduction.html">RP API Documentation</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="introduction.html">3.1_DRAFT</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="introduction.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="introduction.html">Relying Party API</a></li>
    <li><a href="interactions.html">Interactions</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Interactions</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A Smart-ID app can support different interaction types and a relying party can demand a particular interaction with or without a fallback possibility. Different interactions can support different amount of data to display information to user.</p>
</div>
<div id="available_interactions" class="paragraph">
<p>Available interactions are listed in the following table. Availability depends on interaction type chosen and whether a device link flow is used. Each interaction is defined by an object that has 2 parameters: <code>type</code> and either <code>displayText60</code> or <code>displayText200</code>. All possible type value and extra parameter combinations are also listed in the following table.</p>
</div>
<table class="tableblock frame-none grid-none stripes-odd stretch">
<caption class="title">Interaction types</caption>
<colgroup>
<col style="width: 25%;">
<col>
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Interaction type &amp; extra parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-center valign-top">Device link flows</th>
<th class="tableblock halign-center valign-top">Notification based flows*</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>displayTextAndPIN</code> with <code>displayText60</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The simplest interaction with max 60 chars of text and PIN entry on a single screen.</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>verificationCodeChoice</code> with <code>displayText60</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Verification Code Choice interaction. First screen is for code choice and second screen is with max 60 chars text and PIN like <code>displayTextAndPIN</code> is.</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>confirmationMessage</code> with <code>displayText200</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>First screen is for text only (max 200 chars) and has Confirm and Cancel buttons. Second screen is for PIN.</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>confirmationMessageAndVerificationCodeChoice</code> with <code>displayText200</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>First screen combines text and Verification Code choice. Second screen is for PIN.</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Yes</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">*Remark about notification based flows</div>
<div class="paragraph">
<p>There is one exception to interactions in notification based flows&#8201;&#8212;&#8201;the endpoint <code>BASE/v3/signature/notification/linked</code> acts as a device link based endpoint (since it is linked to a device link based certificate-choice request with no VC shown) and therefore only <code>displayTextAndPIN</code> and <code>confirmationMessage</code> interaction types are available.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_requirements_for_interactions_object"><a class="anchor" href="#_requirements_for_interactions_object"></a>Requirements for <code>interactions</code> object</h2>
<div class="sectionbody">
<div class="paragraph">
<p>RP uses <code>interactions</code> parameter to list interactions it allows for the current session. The <code>interactions</code> parameter is a JSON array that is Base64 encoded. Not all app versions may support all interactions. The order of the array items are significant as the Smart-ID server is aware of which app installations support which interactions and will send the interactions to the Smart-ID app in the same order as they are in the <code>interactions</code> array.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The following requirements apply for the <code>interaction</code> object:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For each interaction, the <code>type</code> and the corresponding displayText (either <code>displayText60</code> or <code>displayText200</code>) parameters are mandatory. Meaning that each interaction must include a <strong>non-empty</strong> <code>displayText60</code> or <code>displayText200</code> parameter.</p>
</li>
<li>
<p>It is forbidden to provide both <code>displayText60</code> and <code>displayText200</code> parameters.</p>
</li>
<li>
<p>It is not allowed to have more than one interaction with the same type value.</p>
</li>
<li>
<p>In addition, it is not allowed to list interaction types not meant for the flow (device link flow or notification based flow).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Failing to meet the requirements above will result in an error (HTTP 400 Bad Request).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The interaction that was actually used is reported back to RP with <code>interactionTypeUsed</code> response parameter to the session request. If an app cannot support any interaction requested then the session is cancelled with reason code <code>REQUIRED_INTERACTION_NOT_SUPPORTED_BY_APP</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_guidance_for_writing_display_texts"><a class="anchor" href="#_guidance_for_writing_display_texts"></a>Guidance for writing display texts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>displayText60</code> and <code>displayText200</code> parameters are used by the Smart-ID app to display text on the screen. These parameters must be short and clear. The preferred way of writing <code>displayText60</code> and <code>displayText200</code> is to explain the action user is taking. Interaction type must also be considered when writing a good display text.</p>
</div>
<div class="paragraph">
<p>The following are a few examples of good <code>displayText60</code> and <code>displayText200</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You are logging in to internet bank</p>
</li>
<li>
<p>Log in to mobile banking</p>
</li>
<li>
<p>Sign internet banking contract</p>
</li>
<li>
<p>Sign document Contract.asice</p>
</li>
<li>
<p>Transfer 1000€ to Jane Doe</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>the RP name is not written explicitly as for all interaction types, the RP name is always displayed to the user together with the display text.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_base64_encoding_interactions"><a class="anchor" href="#_base64_encoding_interactions"></a>Base64 encoding <code>interactions</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before sending the RP API request, <code>interactions</code> array must be turned into a string and then must be Base64 encoded. <code>interactions</code> <strong>should</strong> be minified to lower the overhead.
The Base64 encoding can be done as follows:</p>
</div>
<div class="listingblock wrap">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">interactions := BASE64-ENCODE(TO-STRING(MINIFY(interactionsJson)))</code></pre>
</div>
</div>
<div id="_tabs_1" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_1_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_1_php" class="tab">
<p>PHP</p>
</li>
<li id="_tabs_1_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_1_go" class="tab">
<p>Go</p>
</li>
<li id="_tabs_1_rust" class="tab">
<p>Rust</p>
</li>
<li id="_tabs_1_kotlin" class="tab">
<p>Kotlin</p>
</li>
<li id="_tabs_1_c" class="tab">
<p>C#</p>
</li>
<li id="_tabs_1_node_js" class="tab">
<p>Node.js</p>
</li>
<li id="_tabs_1_ruby" class="tab">
<p>Ruby</p>
</li>
</ul>
</div>
<div id="_tabs_1_java--panel" class="tabpanel" aria-labelledby="_tabs_1_java">
<div class="listingblock wrap">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import java.nio.charset.StandardCharsets;
import java.util.Base64;

public class InteractionsBase64Encode {

  public static void main(String[] args) {
    String interactions = """
[{"type":"confirmationMessage","displayText200":"Longer description of the transaction context"},{"type":"displayTextAndPIN","displayText60":"Short description of the transaction context"}]""";

    String interactionsBase64 = Base64.getEncoder().encodeToString(
      interactions.getBytes(StandardCharsets.UTF_8)
    );

    System.out.println(interactionsBase64);
  }
}</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_php--panel" class="tabpanel" aria-labelledby="_tabs_1_php">
<div class="listingblock wrap">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php hljs" data-lang="php">&lt;?php
$interactionsJsonStr = &lt;&lt;&lt;EOD
[{"type":"confirmationMessage","displayText200":"Longer description of the transaction context"},{"type":"displayTextAndPIN","displayText60":"Short description of the transaction context"}]
EOD;

$interactionsBase64 = base64_encode($interactionsJsonStr);
echo $interactionsBase64;

?&gt;</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_python--panel" class="tabpanel" aria-labelledby="_tabs_1_python">
<div class="listingblock wrap">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">import base64
import json

interactions = [{"type":"confirmationMessage","displayText200":"Longer description of the transaction context"},{"type":"displayTextAndPIN","displayText60":"Short description of the transaction context"}]
interactions_string = json.dumps(interactions, separators=(',', ':'))
interactions_base64 = base64.b64encode(interactions_string.encode('utf-8'))
print(interactions_base64)</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_go--panel" class="tabpanel" aria-labelledby="_tabs_1_go">
<div class="listingblock wrap">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">package main

import (
	"encoding/base64"
	"encoding/json"
	"fmt"
)

type Interactions struct {
	Type           string `json:"type"`
	DisplayText200 string `json:"displayText200,omitempty"`
	DisplayText60  string `json:"displayText60,omitempty"`
}

func main() {
	var interactions []Interactions = []Interactions{{Type: "confirmationMessage", DisplayText200: "Longer description of the transaction context"}, {Type: "displayTextAndPIN", DisplayText60: "Short description of the transaction context"}}
	interactionsBytes, err := json.Marshal(interactions)
	if err != nil {
		fmt.Printf("error: %s\n", err)
		return
	}
	var interactionsBase64 []byte = []byte(base64.StdEncoding.EncodeToString(interactionsBytes))
	fmt.Printf("%q\n", interactionsBase64)
}</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_rust--panel" class="tabpanel" aria-labelledby="_tabs_1_rust">
<div class="listingblock wrap">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">use base64::Engine as _;
use serde::{Deserialize, Serialize};

type Interactions&lt;'a&gt; = Vec&lt;Interaction&lt;'a&gt;&gt;;

#[derive(Debug, Deserialize, Serialize)]
enum DisplayText&lt;'a&gt; {
    #[serde(rename = "displayText200")]
    DisplayText200(&amp;'a str),
    #[serde(rename = "displayText60")]
    DisplayText60(&amp;'a str),
}

#[derive(Serialize, Deserialize)]
struct Interaction&lt;'a&gt; {
    #[serde(rename = "type")]
    type_field: &amp;'a str,
    #[serde(flatten)]
    display_text: DisplayText&lt;'a&gt;,
}

fn main() {
    let interactions: Interactions = vec![Interaction{type_field: "confirmationMessage", display_text: DisplayText::DisplayText200("Longer description of the transaction context")}, Interaction{type_field: "displayTextAndPIN", display_text: DisplayText::DisplayText60("Short description of the transaction context")}];

    let interactions_base64: String = base64::engine::general_purpose::STANDARD.encode(serde_json::to_string(&amp;interactions).unwrap().into_bytes());
    println!("{:?}", interactions_base64);
}</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_kotlin--panel" class="tabpanel" aria-labelledby="_tabs_1_kotlin">
<div class="listingblock wrap">
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="kotlin">import java.nio.charset.StandardCharsets
import java.util.Base64

fun main() {
    val interactions: String = """
[{"type":"confirmationMessage","displayText200":"Longer description of the transaction context"},{"type":"displayTextAndPIN","displayText60":"Short description of the transaction context"}]""".trimIndent()

    val interactionsBase64: String = Base64.getEncoder().encodeToString(
        interactions.toByteArray(StandardCharsets.UTF_8)
    )

    println(interactionsBase64)
}</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_c--panel" class="tabpanel" aria-labelledby="_tabs_1_c">
<div class="listingblock wrap">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cs hljs" data-lang="cs">using System;
using System.Text;

public class InteractionsBase64Encode
{
    public static void Main(string[] args)
    {
        String interactionsJson = """[{"type":"confirmationMessage","displayText200":"Longer description of the transaction context"},{"type":"displayTextAndPIN","displayText60":"Short description of the transaction context"}]""";
        String interactionsBase64 = Convert.ToBase64String(Encoding.UTF8.GetBytes(interactionsJson));
        Console.WriteLine(interactionsBase64);
    }
}</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_node_js--panel" class="tabpanel" aria-labelledby="_tabs_1_node_js">
<div class="listingblock wrap">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const interactions = [{"type":"confirmationMessage","displayText200":"Longer description of the transaction context"},{"type":"displayTextAndPIN","displayText60":"Short description of the transaction context"}];
const interactionsString = JSON.stringify(interactions);
const interactionsBase64 = Buffer.from(interactionsString).toString('base64');
console.log(interactions_base64);</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_ruby--panel" class="tabpanel" aria-labelledby="_tabs_1_ruby">
<div class="listingblock wrap">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ruby hljs" data-lang="ruby">require 'base64'
require 'json'

interactions = [{"type":"confirmationMessage","displayText200":"Longer description of the transaction context"},{"type":"displayTextAndPIN","displayText60":"Short description of the transaction context"}]
interactions_string = JSON.generate(interactions)
interactions_base64 = Base64.strict_encode64(interactions_string)
puts interactions_base64</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 1. <code>interactions</code> parameter</div>
<div class="content">
<div class="listingblock wrap">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">W3sidHlwZSI6ImNvbmZpcm1hdGlvbk1lc3NhZ2UiLCJkaXNwbGF5VGV4dDIwMCI6IkxvbmdlciBkZXNjcmlwdGlvbiBvZiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dCJ9LHsidHlwZSI6ImRpc3BsYXlUZXh0QW5kUElOIiwiZGlzcGxheVRleHQ2MCI6IlNob3J0IGRlc2NyaXB0aW9uIG9mIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0In1d</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_interactions_elements_examples"><a class="anchor" href="#_interactions_elements_examples"></a><code>interactions</code> elements examples</h2>
<div class="sectionbody">
<div class="exampleblock">
<div class="title">Example 2. <code>confirmationMessage</code> only, if not available then fail (device link flow).</div>
<div class="content">
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 70%;">
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="listingblock wrap">
<div class="title">Before encoding</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "type": "confirmationMessage",
    "displayText200": "Longer description of the transaction context"
  }
]</code></pre>
</div>
</div>
<div class="listingblock wrap">
<div class="title">Base64 encoded</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "interactions": "W3sidHlwZSI6ImNvbmZpcm1hdGlvbk1lc3NhZ2UiLCJkaXNwbGF5VGV4dDIwMCI6IkxvbmdlciBkZXNjcmlwdGlvbiBvZiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dCJ9XQ=="
}</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><table class="tableblock frame-none grid-none stretch">
<caption class="title">App visualization - confirmation message</caption>
<colgroup>
<col style="width: 50%;">
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/confirmationMessage_1.png" alt="confirmationMessage 1">
</div>
<div class="title">Initial screen</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/confirmationMessage_2.png" alt="confirmationMessage 2">
</div>
<div class="title">PIN entry screen</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-none stretch">
<caption class="title">Watch visualization - confirmation message</caption>
<colgroup>
<col style="width: 50%;">
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/confirmationMessage_1_watch.png" alt="confirmationMessage 1 watch">
</div>
<div class="title">Initial screen (scrolls down)</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/confirmationMessage_2_watch.png" alt="confirmationMessage 2 watch">
</div>
<div class="title">PIN entry screen</div>
</div></div></td>
</tr>
</tbody>
</table></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 3. <code>displayTextAndPIN</code> only, if not available then fail (device link flow).</div>
<div class="content">
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 70%;">
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="listingblock wrap">
<div class="title">Before encoding</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "type": "displayTextAndPIN",
    "displayText60": "Short description of the transaction context"
  }
]</code></pre>
</div>
</div>
<div class="listingblock wrap">
<div class="title">Base64 encoded</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "interactions": "W3sidHlwZSI6ImRpc3BsYXlUZXh0QW5kUElOIiwiZGlzcGxheVRleHQ2MCI6IlNob3J0IGRlc2NyaXB0aW9uIG9mIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0In1d"
}</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><table class="tableblock frame-none grid-none stretch">
<caption class="title">App visualization - display text and PIN</caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/displayTextAndPIN_1.png" alt="displayTextAndPIN 1">
</div>
<div class="title">Initial screen</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-none stretch">
<caption class="title">Watch visualization - display text and PIN</caption>
<colgroup>
<col style="width: 50%;">
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/displayTextAndPIN_1_watch.png" alt="displayTextAndPIN 1 watch">
</div>
<div class="title">Initial screen (scrolls down)</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/displayTextAndPIN_2_watch.png" alt="displayTextAndPIN 2 watch">
</div>
<div class="title">PIN entry screen</div>
</div></div></td>
</tr>
</tbody>
</table></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 4. RP first choice is <code>confirmationMessage</code>, if not available then fall back to <code>displayTextAndPIN</code> (device link flow).</div>
<div class="content">
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 70%;">
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="listingblock wrap">
<div class="title">Before encoding</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "type": "confirmationMessage",
    "displayText200": "Longer description of the transaction context"
  },
  {
    "type": "displayTextAndPIN",
    "displayText60": "Short description of the transaction context"
  }
]</code></pre>
</div>
</div>
<div class="listingblock wrap">
<div class="title">Base64 encoded</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "interactions": "W3sidHlwZSI6ImNvbmZpcm1hdGlvbk1lc3NhZ2UiLCJkaXNwbGF5VGV4dDIwMCI6IkxvbmdlciBkZXNjcmlwdGlvbiBvZiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dCJ9LHsidHlwZSI6ImRpc3BsYXlUZXh0QW5kUElOIiwiZGlzcGxheVRleHQ2MCI6IlNob3J0IGRlc2NyaXB0aW9uIG9mIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0In1d"
}</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><table class="tableblock frame-none grid-none stretch">
<caption class="title">App visualization - confirmation message</caption>
<colgroup>
<col style="width: 50%;">
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/confirmationMessage_1.png" alt="confirmationMessage 1">
</div>
<div class="title">Initial screen</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/confirmationMessage_2.png" alt="confirmationMessage 2">
</div>
<div class="title">PIN entry screen</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-none stretch">
<caption class="title">Watch visualization - confirmation message</caption>
<colgroup>
<col style="width: 50%;">
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/confirmationMessage_1_watch.png" alt="confirmationMessage 1 watch">
</div>
<div class="title">Initial screen (scrolls down)</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/confirmationMessage_2_watch.png" alt="confirmationMessage 2 watch">
</div>
<div class="title">PIN entry screen</div>
</div></div></td>
</tr>
</tbody>
</table></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 5. <code>verificationCodeChoice</code> only, if not available then fail (notification based flow).</div>
<div class="content">
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 70%;">
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="listingblock wrap">
<div class="title">Before encoding</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "type": "verificationCodeChoice",
    "displayText60": "Short description of the transaction context"
  }
]</code></pre>
</div>
</div>
<div class="listingblock wrap">
<div class="title">Base64 encoded</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "interactions": "W3sidHlwZSI6InZlcmlmaWNhdGlvbkNvZGVDaG9pY2UiLCJkaXNwbGF5VGV4dDYwIjoiU2hvcnQgZGVzY3JpcHRpb24gb2YgdGhlIHRyYW5zYWN0aW9uIGNvbnRleHQifV0="
}</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><table class="tableblock frame-none grid-none stretch">
<caption class="title">App visualization - verification code choice</caption>
<colgroup>
<col style="width: 50%;">
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/verificationCodeChoice_1.png" alt="verificationCodeChoice 1">
</div>
<div class="title">Initial screen</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/verificationCodeChoice_2.png" alt="verificationCodeChoice 2">
</div>
<div class="title">PIN entry screen</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-none stretch">
<caption class="title">Watch visualization - verification code choice</caption>
<colgroup>
<col style="width: 50%;">
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/verificationCodeChoice_1_watch.png" alt="verificationCodeChoice 1 watch">
</div>
<div class="title">Initial screen (scrolls down)</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/verificationCodeChoice_2_watch.png" alt="verificationCodeChoice 2 watch">
</div>
<div class="title">PIN entry screen</div>
</div></div></td>
</tr>
</tbody>
</table></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 6. RP first choice is <code>confirmationMessageAndVerificationCodeChoice</code>, if not available then fall back to <code>verificationCodeChoice</code> (notification based flow).</div>
<div class="content">
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 70%;">
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="listingblock wrap">
<div class="title">Before encoding</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "type": "confirmationMessageAndVerificationCodeChoice",
    "displayText200": "Longer description of the transaction context"
  },
  {
    "type": "verificationCodeChoice",
    "displayText60": "Short description of the transaction context"
  }
]</code></pre>
</div>
</div>
<div class="listingblock wrap">
<div class="title">Base64 encoded</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "interactions": "W3sidHlwZSI6ImNvbmZpcm1hdGlvbk1lc3NhZ2VBbmRWZXJpZmljYXRpb25Db2RlQ2hvaWNlIiwiZGlzcGxheVRleHQyMDAiOiJMb25nZXIgZGVzY3JpcHRpb24gb2YgdGhlIHRyYW5zYWN0aW9uIGNvbnRleHQifSx7InR5cGUiOiJ2ZXJpZmljYXRpb25Db2RlQ2hvaWNlIiwiZGlzcGxheVRleHQ2MCI6IlNob3J0IGRlc2NyaXB0aW9uIG9mIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0In1d"
}</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><table class="tableblock frame-none grid-none stretch">
<caption class="title">App visualization - confirmation message and VC choice</caption>
<colgroup>
<col style="width: 50%;">
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/confirmationMessageAndVerificationCodeChoice_1.png" alt="confirmationMessageAndVerificationCodeChoice 1">
</div>
<div class="title">Initial screen</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/confirmationMessageAndVerificationCodeChoice_2.png" alt="confirmationMessageAndVerificationCodeChoice 2">
</div>
<div class="title">PIN entry screen</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-none stretch">
<caption class="title">Watch visualization - confirmation message and VC choice</caption>
<colgroup>
<col style="width: 50%;">
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/confirmationMessageAndVerificationCodeChoice_1_watch.png" alt="confirmationMessageAndVerificationCodeChoice 1 watch">
</div>
<div class="title">Initial screen (scrolls down)</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/confirmationMessageAndVerificationCodeChoice_2_watch.png" alt="confirmationMessageAndVerificationCodeChoice 2 watch">
</div>
<div class="title">PIN entry screen</div>
</div></div></td>
</tr>
</tbody>
</table></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>© 2024 SK ID Solutions AS</p>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/tabs.js" data-sync-storage-key="language"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
